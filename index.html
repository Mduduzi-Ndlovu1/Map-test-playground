<script>
    // Disable right-click on the page
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault(); // This will prevent the context menu from appearing
    });
  </script>

</div>

  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1pulse online Map</title>
    <link rel="icon" href="https://1pulse.online/images/ipulse-logo.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="manifest" href="/manifest.json">


    <style>
.cta-button {
    background-color: #0e5aff;
    color: white;
    padding: 12px 20px;
    border-radius: 50px;
    font-size: 18px;
    text-decoration: none;
    transition: background-color 0.3s;
    border: solid 1px #f0f0f0;
    box-shadow: 0px 8px 13px rgba(0, 0, 0, 0.363);
}

.cta-button:hover {
    background-color: #1077d8;
}


      body.dark-mode {
        background-color: #2b2b2b;
        color: #fff;
      }

      .dark-mode .modal {
        background-color: #444;
      }

      /* Additional styles for dark mode if needed */
    </style>
  </head>
  <body>
    <div id="map"></div>

    <!-- Dark Mode Toggle Button -->
    <button id="modal-button" onclick="pulseopenModal()">
      <img src="https://1pulse.online/images/ipulse-logo.png" alt="1Pulse" style="width: 50px; height: 50px; vertical-align: middle;">
    </button>

    <!-- Modal for Greater Johannesburg Neighborhood Oversight -->
  <div id="gjnoModal" class="gjno-modal">
    <div class="gjno-modal-content">
      <span class="gjno-close" style="color: #2b2b2b;">&times;</span>
      <div class="cotainer">
        <style>
            /* General Container */
    .container {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    /* Section 1 */
    .section-1 header {
      text-align: center;
      margin-bottom: 20px;
    }

    .section-1 h1 {
      font-size: 32px;
      font-weight: bold;
      margin: 0;
    }

    .search-bar input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .hero-image img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      border-radius: 8px;
      margin-top: 20px;
    }

    .image-description p {
      font-size: 16px;
      text-align: center;
      margin-top: 10px;
      color: #555;
    }

    /* Section 2: Resources */
    .section-2 {
      text-align: center;
      margin-top: 40px;
    }

    .section-2 h2 {
      font-size: 28px;
      font-weight: bold;
    }

    .section-2 p {
      font-size: 16px;
      color: #555;
      margin-top: 10px;
    }

    /* Section 3: Markers and Sponsors */
    .section-3 {
      margin-top: 40px;
    }

    .markers h3, .sponsors h3 {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
    }

    .marker-item, .sponsor-item {
      display: flex;
      align-items: center;
      border-radius: 22px;
      background-color: #f7f7f7;
      margin-bottom: 20px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .marker-item img, .sponsor-item img {
      width: 40px;
      height: 40px;
      margin-right: 20px;
    }

    .marker-info h4, .sponsor-info h4 {
      font-size: 18px;
      margin: 0;
      font-weight: bold;
    }

    .marker-info p, .sponsor-info p {
      font-size: 14px;
      color: #777;
    }

    .sponsor-item {
      border-radius: 30px;
      background-color: #e9f7fb;
    }

    .marker-item:last-child, .sponsor-item:last-child {
      margin-bottom: 0;
    }

.cta-button {

}

.cta-button:hover {
    background-color: #1077d8;
}

#install-button {

background-color: #0e5aff; width:95%;
    color: white;
    padding: 12px 20px;
    border-radius: 50px;
    font-size: 18px;
    text-decoration: none;
    transition: background-color 0.3s;
    border: solid 1px #f0f0f0;
    box-shadow: 0px 8px 13px rgba(0, 0, 0, 0.363);


  cursor: pointer;
}

#install-button:hover {
  background-color: #0056b3;
}

        </style>
        <!-- Section 1: Header, Search Bar, Hero Image -->
        <div class="section-1">
          <header>
            <h1>Community Resources Map</h1>
          </header>
          <!---<div class="search-bar">
            <input type="text" placeholder="Search for resources or issues..." />
          </div>-->
          <div class="hero-image">
            <img src="https://1pulse.online/images/1pulse-promo-map.png" alt="Community map image" />
          </div>
          <div class="image-description">
            <p>This map highlights key community issues and available resources. Explore the markers to find out more.</p>
          </div>
<button id="install-button" style="display: none;">Install App</button>
<script>

let deferredPrompt;
const installButton = document.getElementById('install-button');

// Listen for the 'beforeinstallprompt' event
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault(); // Prevent the default prompt
  deferredPrompt = e; // Save the event for later
  installButton.style.display = 'block'; // Show the install button
});

// Add a click event listener to the Install button
installButton.addEventListener('click', () => {
  installButton.style.display = 'none'; // Hide the button after it is clicked
  if (deferredPrompt) {
    deferredPrompt.prompt(); // Show the install prompt
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the install prompt');
      } else {
        console.log('User dismissed the install prompt');
      }
      deferredPrompt = null; // Clear the saved event
    });
  }
});


</script>
        </div>

        <!-- Section 2: Resources Description -->


        <!-- Section 3: Markers and Sponsors -->
        <div class="section-3">
          <!-- Marker Divs -->
          <div class="markers">
            <h3>Marker Resources</h3>
            <div class="marker-item">
              <img src="https://1pulse.online/images/user-here.png" alt="Marker Icon 1" />
              <div class="marker-info">
                <h4>You Are Here</h4>
                <p>Click the clossest next to this icon and a window will show up so you can make a post.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/good deed icon.png" alt="Marker Icon 2" />
              <div class="marker-info">
                <h4>Good Deeds</h4>
                <p>Posts about anything good in the community that needs attention.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/crime.png" alt="Marker Icon 3" />
              <div class="marker-info">
                <h4>Unresolved Crime</h4>
                <p>Posts relating to all types of crimes, mostly violant.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/property.png" alt="Marker Icon 4" />
              <div class="marker-info">
                <h4>Service Delivery</h4>
                <p>Posts relating to municipal service delivery to forster countabilty .</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/Looting.png" alt="Marker Icon 5" />
              <div class="marker-info">
                <h4>Looting/Vandalism</h4>
                <p>This is where the crime is unclear but yet affects the publiuc.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/xenophobia.png" alt="Marker Icon 5" />
              <div class="marker-info">
                <h4>Non-compliance</h4>
                <p>When a business or public facility does not comply with the law, this marker also shows compliant entities for public updates.
                </p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/Health-location.png" alt="Marker Icon 6" />
              <div class="marker-info">
                <h4>Health</h4>
                <p>Issues of health that affect the general publicu.</p>
              </div>
            </div>
          </div>

          <!-- Sponsors Divs --
          <div class="sponsors">
            <h3>Sponsors</h3>
            <div class="sponsor-item">
              <img src="sponsor1-logo.jpg" alt="Sponsor 1" />
              <div class="sponsor-info">
                <h4>Sponsor 1</h4>
                <p>Details about Sponsor 1's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor2-logo.jpg" alt="Sponsor 2" />
              <div class="sponsor-info">
                <h4>Sponsor 2</h4>
                <p>Details about Sponsor 2's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor3-logo.jpg" alt="Sponsor 3" />
              <div class="sponsor-info">
                <h4>Sponsor 3</h4>
                <p>Details about Sponsor 3's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor4-logo.jpg" alt="Sponsor 4" />
              <div class="sponsor-info">
                <h4>Sponsor 4</h4>
                <p>Details about Sponsor 4's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor5-logo.jpg" alt="Sponsor 5" />
              <div class="sponsor-info">
                <h4>Sponsor 5</h4>
                <p>Details about Sponsor 5's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor6-logo.jpg" alt="Sponsor 6" />
              <div class="sponsor-info">
                <h4>Sponsor 6</h4>
                <p>Details about Sponsor 6's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor7-logo.jpg" alt="Sponsor 7" />
              <div class="sponsor-info">
                <h4>Sponsor 7</h4>
                <p>Details about Sponsor 7's contribution.</p>
              </div>
            </div>
          </div>-->
        </div>
      </div>

       <!-- Section 2: Resources Description -->
   <div class="section-2">
   <h2>First Responders</h2>
    <p>This indicator helps us see who solved what problem. This is good for businesses and government departments dedicated to helping the community.</p>
  </div>

    <h2>Resources</h2>
    <p>Explore the various resources available within the community, designed to assist you in solving problems and improving quality of life.</p>

  <div id="modal-images-container" class="gjno-images-container"></div>

        <!-- Images from the logo-nav section will be inserted here dynamically -->
      </div>
    </div>


    <!-- Logo Navigation -->
    <div id="logo-nav">
      <div id="logo-container">
          <div class="logo" data-modal-id="1"> 
              <img src="https://1pulse.online/images/errand%20camel%20logo.png" alt="Logo 1">
          </div>
          <div class="logo" data-modal-id="2">
              <img src="https://1pulse.online/images/bonizluu-fav.png" alt="Logo 2">
          </div>
          <div class="logo" data-modal-id="3">
            <img src="https://1pulse.online/images/hillbrow.jpeg" alt="Logo 3">
        </div>
          <div class="logo" data-modal-id="4">
              <img src="https://1pulse.online/images/Africa%20City.png" alt="Logo 4">
          </div>
          <div class="logo" data-modal-id="5">
              <img src="https://1pulse.online/images/pulse.jpeg" alt="Logo 5">
          </div>
          <div class="logo" data-modal-id="6">
              <img src="https://1pulse.online/images/Tae-Trax-Logo.png" alt="Logo 6">
          </div>
      </div>
    </div>
 </div>
    <!-- Modal for logos -->
  <div id="myModal" class="modal-brah">
    <div class="modal-content-brah">
      <span class="close-brah">&times;</span>
      <h2 class="modal-title-brah"></h2>
      <p class="modal-description-brah"></p>
      <div class="image-container">
        <img class="modal-image-brah" src="" alt="Modal Image">

      </div>
    </div>
  </div>


    <!-- Modal for creating a new post -->
  <div class="modal-overlay" id="modal-overlay"></div>
  <div class="modal" id="modal">
    <h3>Create a Post</h3>
    <form id="postForm" enctype="multipart/form-data">
      <div class="form-field">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required />
      </div>
      <div class="form-field">
        <label for="surname">Surname:</label>
        <input type="text" id="surname" name="surname" required />
      </div>
      <div class="form-field">
        <label for="description">Description:</label>
        <textarea id="description" name="description" required></textarea>
      </div>
      <div class="form-field">
        <label for="type">Type of Post:</label>
        <div class="custom-select-container">
          <select id="type" name="type" required class="custom-select">
            <option value="" disabled selected>Select a type...</option>
  <option value="Good Deeds">Good Deeds</option>
            <option value="Health">Health</option>
            <option value="Service Delivery">Service Delivery</option>
            <option value="Violent Crime">Violent Crime</option>
            <option value="Looting">Looting</option>
            <option value="Non-compliance">Non-compliance</option>
          </select>
        </div>
      </div>
      <div class="form-field">
        <label for="image">Image:</label>
        <input type="file" id="image" name="image" required />
      </div>
      <button type="submit">Save Post</button>
      <div id="spinner" style="display: none;">Submitting...</div>

    </form>
  </div>


    <!-- Modal for viewing a post -->
    <div class="modal-overlay" id="viewModal-overlay"></div>
    <div class="modal" id="viewModal">
      <div id="postDetails"></div>
      <h4>Comments:</h4>
      <div id="commentsList"></div>
      <form id="commentForm">
        <div class="form-field">
          <label for="commentName">Your Name:</label>
          <input type="text" id="commentName" name="commentName" required />
        </div>
        <div class="form-field">
          <label for="commentText">Add a Comment:</label>
          <input type="text" id="commentText" name="commentText" required />
        </div>
        <button type="submit">Add Comment</button>
      </form>
    </div>

    <p id="gyroscope"></p> <!-- Degrees Text -->
    <div id="penIcon">
        <!-- Pen Image -->
        <img src="compass.png" alt="Pen Icon">
    </div>

    <script>
        // Handle device orientation (compass and gyroscope)
        let currentHeading = 0;  // To store the compass heading

        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', function(event) {
                // Get the heading value (alpha) from the compass
                const heading = event.alpha;

                if (heading !== null) {
                    // Update the gyroscope degrees text
                    document.getElementById("gyroscope").textContent = `Facing: ${Math.round(heading)}°`;

                    // Update the pen icon's rotation based on the device's heading
                    const penIcon = document.getElementById("penIcon");
                    penIcon.style.transform = `rotate(${heading}deg)`; // Rotate the pen image
                }
            });
        } else {
            alert("Device Orientation is not supported on your device.");
        }
    </script>
<script>



if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js').then(() => {
    console.log('Service Worker registered');
  });
}

let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Show install button or message
});

document.getElementById('install-button').addEventListener('click', () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('App installed');
      }
      deferredPrompt = null;
    });
  }
});

</script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Custom JS -->
    <script src="logic.js"></script>
  </body>
  </html>